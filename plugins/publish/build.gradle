apply plugin: 'groovy'
apply plugin: 'java-gradle-plugin'

dependencies {
    compile gradleApi()
}

description = 'Gradle plug-ins to publish artifacts to Maven local and JCenter repositories.'
version = '1.0.0'

if (!project.hasProperty('disable-self')) {
    apply plugin: 'igel.publish.groovy'

    apply plugin: 'com.jfrog.bintray'

    bintray {
        publications = ['maven']
        user = project.hasProperty('bintray.user') ? project['bintray.user'] : 'anonymous'
        key = project.hasProperty('bintray.key') ? project['bintray.key'] : '???'
        pkg {
            repo = 'gradle-plugins'
            name = 'publish'
            version.name = project.version
        }
    }
} else {
    apply plugin: 'maven-publish'

    publishing {
        publications {
            maven(MavenPublication) {
                from components.java
            }
        }
    }
}
